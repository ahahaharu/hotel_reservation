{% extends "hotel/base.html" %} {% block title %}Оформление заказа{% endblock %}
{% block content %}
<h2>Оформление заказа</h2>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px">
  <!-- Order Summary -->
  <section>
    <h3>Ваш заказ</h3>
    <table>
      <thead>
        <tr>
          <th>Услуга</th>
          <th>Кол-во</th>
          <th>Цена</th>
        </tr>
      </thead>
      <tbody>
        {% for item in cart.items.all %}
        <tr>
          <td>{{ item.service.name }}</td>
          <td>{{ item.quantity }}</td>
          <td>${{ item.total_price }}</td>
        </tr>
        {% endfor %}
      </tbody>
      <tfoot>
        <tr>
          <th>Итого:</th>
          <th></th>
          <th>${{ total_price }}</th>
        </tr>
      </tfoot>
    </table>
  </section>

  <!-- Customer Information -->
  <section>
    <h3>Информация для заказа</h3>
    {% if user.is_authenticated %}
    <p>Заказ будет оформлен на: <strong>{{ user.email }}</strong></p>
    {% else %}
    <p>
      Пожалуйста, <a href="{% url 'hotel:login' %}">войдите</a> для оформления
      заказа.
    </p>
    {% endif %}

    <div>
      <a href="{% url 'hotel:cart_view' %}" class="btn btn-secondary">
        ← Назад в корзину
      </a>
      {% if user.is_authenticated %}
      <a href="{% url 'hotel:payment' %}" class="btn btn-primary">
        Оплатить →
      </a>
      {% endif %}
    </div>
  </section>
</div>
{% endblock %}
